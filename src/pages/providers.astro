---
import Layout from "../layouts/Layout.astro";
import CardPerson from "../components/CardPerson.astro";
import { contentfulClient } from "../lib/contentful";
import type { Person } from "../lib/contentful";

const entries = await contentfulClient.getEntries<Person>({
  content_type: "person",
  "metadata.tags.sys.id[all]": "jobTypeProvider"
});

const people = entries.items.map((item) => {
  const { title, firstName, lastName, bio, jobTitle, slug, headshot, jobType } = item.fields;
  return {
    title,
    firstName,
	lastName,
	bio,
	jobTitle,
	slug,
	headshot
  };
});
---

<Layout>
	<main class="overflow-hidden">
		<div class="bg-white">
			<div class="mx-auto py-12 px-4 max-w-7xl sm:px-6 lg:px-8 lg:py-24">
				<div class="space-y-12">
			  		<div id="leadership" class="space-y-5 sm:space-y-4 md:max-w-xl lg:max-w-3xl xl:max-w-none">
					<h2 class="text-3xl font-extrabold tracking-tight sm:text-4xl">Providers</h2>
			  	</div>
			  	<ul role="list" class="space-y-12 sm:grid sm:grid-cols-2 sm:gap-x-6 sm:gap-y-12 sm:space-y-0 lg:grid-cols-3 lg:gap-x-8">
					{people.map((person) => (
						<li>
							<a class="clickable-person" href={`/providers/${person.slug}/`}>
								<div class="person-container space-y-4">
									<div class="aspect-w-3 aspect-h-2">
										{person.headshot ?
											<img class="transition duration-300 object-cover shadow-lg rounded-lg hover:shadow-2xl" src={person.headshot[0].url} alt={person.title}>
											:
											<img class="transition duration-300 object-cover shadow-lg rounded-lg hover:shadow-2xl" src="https://res.cloudinary.com/basicgenius/image/upload/v1646250153/missing-headshot_exwtou.jpg" alt={person.title}>
										}
									</div>
									<div class="space-y-2">
										<div class="text-lg leading-6 font-medium space-y-1">
											<h3>{person.title}</h3>
											<p class="text-seasons-blue-600">{person.jobTitle}</p>
										</div>
									</div>
								</div>
							</a>
						</li>
				  	))}
			  	</ul>
			</div>
		</div>
		</div>
	</main>
</Layout>


